function d(t,n){const r=f(t);return{...{title:r.data.title||n,date:r.data.date||new Date().toISOString(),tags:r.data.tags||[],category:r.data.category||"",excerpt:r.data.excerpt||l(r.content)},slug:n,content:r.content}}function f(t){const n=/^---\s*\n([\s\S]*?)\n---\s*\n([\s\S]*)$/,r=t.match(n);if(!r)return{data:{},content:t};const e=r[1],s=r[2];return{data:m(e),content:s}}function m(t){const n={},r=t.split(`
`);let e=null,s=[];for(const c of r){const a=c.trim();if(!a||a.startsWith("#"))continue;const o=a.indexOf(":");if(o!==-1){e&&s.length>0&&(n[e]=s,s=[]),e=a.substring(0,o).trim();const i=a.substring(o+1).trim();i&&(n[e]=u(i),e=null)}else if(a.startsWith("-")&&e){const i=a.substring(1).trim();i&&s.push(u(i))}}return e&&s.length>0&&(n[e]=s),n}function u(t){if(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'"))return t.slice(1,-1);if(t==="true")return!0;if(t==="false")return!1;if(t==="null")return null;const n=Number(t);return isNaN(n)?t:n}function l(t,n=200){return t.replace(/```[\s\S]*?```/g,"").replace(/\n+/g," ").trim().substring(0,n)}function g(t){return new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})}export{g as f,d as p};
